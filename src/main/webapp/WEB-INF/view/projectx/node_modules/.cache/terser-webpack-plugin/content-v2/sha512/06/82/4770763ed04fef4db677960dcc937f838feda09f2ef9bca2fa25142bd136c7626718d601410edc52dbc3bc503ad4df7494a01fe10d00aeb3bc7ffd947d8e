{"map":"{\"version\":3,\"sources\":[\"/Users/ocean/Documents/KTH/Nätverksprogrammering/project/src/main/webapp/WEB-INF/view/projectx/src/Input.js\",\"/Users/ocean/Documents/KTH/Nätverksprogrammering/project/src/main/webapp/WEB-INF/view/projectx/src/Form.js\",\"/Users/ocean/Documents/KTH/Nätverksprogrammering/project/src/main/webapp/WEB-INF/view/projectx/src/index.js\"],\"names\":[\"Input\",\"props\",\"_this\",\"Object\",\"classCallCheck\",\"this\",\"possibleConstructorReturn\",\"getPrototypeOf\",\"call\",\"state\",\"value\",\"className\",\"error\",\"_this$props\",\"handleError\",\"opts\",\"objectWithoutProperties\",\"react_default\",\"a\",\"createElement\",\"assign\",\"onChange\",\"inputChange\",\"Component\",\"Form\",\"field\",\"errmsg\",\"setState\",\"prevState\",\"failure\",\"errcount\",\"errmsgs\",\"objectSpread\",\"defineProperty\",\"renderError\",\"values\",\"find\",\"v\",\"handleSubmit\",\"event\",\"preventDefault\",\"data\",\"FormData\",\"form\",\"fetch\",\"action\",\"method\",\"body\",\"URLSearchParams\",\"then\",\"redirected\",\"window\",\"location\",\"url\",\"catch\",\"e\",\"console\",\"warn\",\"_this2\",\"inputs\",\"map\",\"_ref\",\"index\",\"name\",\"placeholder\",\"type\",\"src_Input\",\"key\",\"errors\",\"onSubmit\",\"ref\",\"fm\",\"params\",\"search\",\"ReactDOM\",\"render\",\"src_Form\",\"get\",\"document\",\"getElementById\"],\"mappings\":\"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\",\"sourcesContent\":[\"import React, { Component } from 'react'\\nimport PropTypes from 'prop-types'\\n\\nclass Input extends Component {\\n    constructor(props){\\n        super(props)\\n        this.state = {\\n            value: props.value? props.value : '',\\n            className: props.className? props.className : '',\\n            error: false\\n        }\\n    }\\n\\n    //...\\n\\n    render () {\\n        const {handleError, ...opts} = this.props\\n        this.handleError = handleError\\n        return (\\n            <input {...opts} value={this.state.value}\\n                   onChange={this.inputChange} className={this.state.className} />\\n        )\\n    }\\n}\\n\\nInput.propTypes = {\\n    name: PropTypes.string,\\n    placeholder: PropTypes.string,\\n    type: PropTypes.string,\\n    className: PropTypes.string,\\n    value: PropTypes.string,\\n    handleError: PropTypes.func\\n}\\n\\nexport default Input\",\"import React, { Component } from 'react'\\nimport PropTypes from 'prop-types'\\nimport Input from './Input'\\n\\nclass Form extends Component {\\n\\n    constructor(props) {\\n        super(props)\\n        if(props.error) {\\n            this.state = {\\n                failure: 'wrong username or password!',\\n                errcount: 0\\n            }\\n        } else {\\n            this.state = { errcount: 0 }\\n        }\\n    }\\n\\n    handleError = (field, errmsg) => {\\n        if(!field) return\\n\\n        if(errmsg) {\\n            this.setState((prevState) => ({\\n                failure: '',\\n                errcount: prevState.errcount + 1,\\n                errmsgs: {...prevState.errmsgs, [field]: errmsg}\\n            }))\\n        } else {\\n            this.setState((prevState) => ({\\n                failure: '',\\n                errcount: prevState.errcount===1? 0 : prevState.errcount-1,\\n                errmsgs: {...prevState.errmsgs, [field]: ''}\\n            }))\\n        }\\n    }\\n\\n    renderError = () => {\\n        if(this.state.errcount || this.state.failure) {\\n            const errmsg = this.state.failure\\n                || Object.values(this.state.errmsgs).find(v=>v)\\n            return <div className=\\\"error\\\">{errmsg}</div>\\n        }\\n    }\\n\\n    render() {\\n        const inputs = this.props.inputs.map(\\n            ({name, placeholder, type, value, className}, index) => (\\n                <Input key={index} name={name} placeholder={placeholder} type={type} value={value}\\n                       className={type==='submit'? className : ''} handleError={this.handleError} />\\n            )\\n        )\\n        const errors = this.renderError()\\n        return (\\n            <form {...this.props} onSubmit={this.handleSubmit} ref={fm => {this.form=fm}} >\\n                {inputs}\\n                {errors}\\n            </form>\\n        )\\n    }\\n\\n    handleSubmit = (event) => {\\n        event.preventDefault()\\n        if(!this.state.errcount) {\\n            const data = new FormData(this.form)\\n            fetch(this.form.action, {\\n                method: this.form.method,\\n                body: new URLSearchParams(data)\\n            })\\n                .then(v => {\\n                    if(v.redirected) window.location = v.url\\n                })\\n                .catch(e => console.warn(e))\\n        }\\n    }\\n}\\n\\nForm.propTypes = {\\n    name: PropTypes.string,\\n    action: PropTypes.string,\\n    method: PropTypes.string,\\n    inputs: PropTypes.array,\\n    error: PropTypes.string\\n}\\n\\nexport default Form\",\"import React from 'react'\\nimport ReactDOM from 'react-dom'\\nimport './index.css'\\nimport Form from './Form'\\n\\nconst inputs = [{\\n    name: \\\"username\\\",\\n    placeholder: \\\"username\\\",\\n    type: \\\"text\\\"\\n},{\\n    name: \\\"password\\\",\\n    placeholder: \\\"password\\\",\\n    type: \\\"password\\\"\\n},{\\n    type: \\\"submit\\\",\\n    value: \\\"Submit\\\",\\n    className: \\\"btn\\\"\\n}]\\n\\nconst props = {\\n    name: 'loginForm',\\n    method: 'POST',\\n    action: '/perform_login',\\n    inputs: inputs\\n}\\n\\nconst params = new URLSearchParams(window.location.search)\\n\\nReactDOM.render(\\n    <Form {...props} error={params.get('error')} />,\\n    document.getElementById('container'))\\n\"]}","code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,r,t){e.exports=t(19)},17:function(e,r,t){},19:function(e,r,t){\"use strict\";t.r(r);var a=t(0),n=t.n(a),o=t(9),s=t.n(o),c=(t(17),t(1)),u=t(7),i=t(2),l=t(3),m=t(5),h=t(4),f=t(6),d=t(10),p=function(e){function r(e){var t;return Object(i.a)(this,r),(t=Object(m.a)(this,Object(h.a)(r).call(this,e))).state={value:e.value?e.value:\"\",className:e.className?e.className:\"\",error:!1},t}return Object(f.a)(r,e),Object(l.a)(r,[{key:\"render\",value:function(){var e=this.props,r=e.handleError,t=Object(d.a)(e,[\"handleError\"]);return this.handleError=r,n.a.createElement(\"input\",Object.assign({},t,{value:this.state.value,onChange:this.inputChange,className:this.state.className}))}}]),r}(a.Component),b=function(e){function r(e){var t;return Object(i.a)(this,r),(t=Object(m.a)(this,Object(h.a)(r).call(this,e))).handleError=function(e,r){e&&(r?t.setState(function(t){return{failure:\"\",errcount:t.errcount+1,errmsgs:Object(u.a)({},t.errmsgs,Object(c.a)({},e,r))}}):t.setState(function(r){return{failure:\"\",errcount:1===r.errcount?0:r.errcount-1,errmsgs:Object(u.a)({},r.errmsgs,Object(c.a)({},e,\"\"))}}))},t.renderError=function(){if(t.state.errcount||t.state.failure){var e=t.state.failure||Object.values(t.state.errmsgs).find(function(e){return e});return n.a.createElement(\"div\",{className:\"error\"},e)}},t.handleSubmit=function(e){if(e.preventDefault(),!t.state.errcount){var r=new FormData(t.form);fetch(t.form.action,{method:t.form.method,body:new URLSearchParams(r)}).then(function(e){e.redirected&&(window.location=e.url)}).catch(function(e){return console.warn(e)})}},e.error?t.state={failure:\"wrong username or password!\",errcount:0}:t.state={errcount:0},t}return Object(f.a)(r,e),Object(l.a)(r,[{key:\"render\",value:function(){var e=this,r=this.props.inputs.map(function(r,t){var a=r.name,o=r.placeholder,s=r.type,c=r.value,u=r.className;return n.a.createElement(p,{key:t,name:a,placeholder:o,type:s,value:c,className:\"submit\"===s?u:\"\",handleError:e.handleError})}),t=this.renderError();return n.a.createElement(\"form\",Object.assign({},this.props,{onSubmit:this.handleSubmit,ref:function(r){e.form=r}}),r,t)}}]),r}(a.Component),v={name:\"loginForm\",method:\"POST\",action:\"/perform_login\",inputs:[{name:\"username\",placeholder:\"username\",type:\"text\"},{name:\"password\",placeholder:\"password\",type:\"password\"},{type:\"submit\",value:\"Submit\",className:\"btn\"}]},O=new URLSearchParams(window.location.search);s.a.render(n.a.createElement(b,Object.assign({},v,{error:O.get(\"error\")})),document.getElementById(\"container\"))}},[[11,2,1]]]);","extractedComments":[]}