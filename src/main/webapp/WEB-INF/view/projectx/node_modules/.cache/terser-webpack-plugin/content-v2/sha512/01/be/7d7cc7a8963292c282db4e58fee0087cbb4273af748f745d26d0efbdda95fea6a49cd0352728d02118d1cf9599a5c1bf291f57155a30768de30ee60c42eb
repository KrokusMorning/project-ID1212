{"map":"{\"version\":3,\"sources\":[\"/Users/ocean/Documents/KTH/Nätverksprogrammering/project/src/main/webapp/WEB-INF/view/projectx/src/ImageUpload.js\",\"/Users/ocean/Documents/KTH/Nätverksprogrammering/project/src/main/webapp/WEB-INF/view/projectx/src/Images.js\",\"/Users/ocean/Documents/KTH/Nätverksprogrammering/project/src/main/webapp/WEB-INF/view/projectx/src/Main.js\",\"/Users/ocean/Documents/KTH/Nätverksprogrammering/project/src/main/webapp/WEB-INF/view/projectx/src/App.js\",\"/Users/ocean/Documents/KTH/Nätverksprogrammering/project/src/main/webapp/WEB-INF/view/projectx/src/index.js\"],\"names\":[\"ImageUpload\",\"props\",\"_this\",\"Object\",\"classCallCheck\",\"this\",\"possibleConstructorReturn\",\"getPrototypeOf\",\"call\",\"imageChosen\",\"event\",\"setState\",\"picture\",\"target\",\"files\",\"uploadImage\",\"data\",\"FormData\",\"append\",\"state\",\"fetch\",\"method\",\"body\",\"then\",\"response\",\"console\",\"log\",\"ok\",\"status\",\"Error\",\"catch\",\"error\",\"alert\",\"react_default\",\"a\",\"createElement\",\"type\",\"accept\",\"onChange\",\"onClick\",\"Component\",\"Images\",\"deleteImage\",\"imageName\",\"componentDidMount\",\"Item\",\"value\",\"MyList\",\"items\",\"map\",\"item\",\"src\",\"base64\",\"height\",\"auth\",\"uploader\",\"name\",\"split\",\"slice\",\"join\",\"images\",\"_this2\",\"json\",\"responseData\",\"length\",\"user\",\"admin\",\"isAuthenticated\",\"authenticate\",\"cb\",\"getRole\",\"signout\",\"headers\",\"Accept\",\"Content-Type\",\"username\",\"role\",\"authorities\",\"AuthButton\",\"withRouter\",\"_ref\",\"history\",\"push\",\"PrivateRoute\",\"_ref2\",\"component\",\"rest\",\"objectWithoutProperties\",\"Route\",\"assign\",\"render\",\"Redirect\",\"to\",\"pathname\",\"from\",\"location\",\"Public\",\"Protected\",\"Login\",\"redirectToReferrer\",\"password\",\"login\",\"preventDefault\",\"handleInputChange\",\"bind\",\"assertThisInitialized\",\"defineProperty\",\"onSubmit\",\"React\",\"Register\",\"_this3\",\"handleSubmit\",\"message\",\"Auth\",\"BrowserRouter\",\"Link\",\"path\",\"App\",\"Main\",\"src_App\",\"document\",\"getElementById\"],\"mappings\":\"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\",\"sourcesContent\":[\"import React, { Component } from 'react'\\n\\nclass ImageUpload extends Component {\\n\\n    constructor(props) {\\n        super(props);\\n        this.state = { picture: null };\\n    }\\n\\n    imageChosen = event => {\\n        this.setState({\\n            picture: event.target.files[0],\\n        });\\n    }\\n\\n    uploadImage = () => {\\n        let data = new FormData()\\n        data.append('file', this.state.picture)\\n        fetch('/uploadImage', {\\n            method: 'POST',\\n            body: data\\n        }).then((response) => {\\n            console.log(response)\\n            if(!response.ok && response.status === 401) throw new Error(\\\"An image with this filename already exists.\\\");\\n            else if(!response.ok && response.status === 500) throw new Error(\\\"Server error, please try again later.\\\");\\n            else return response;\\n        })\\n            .then((data) => {\\n                console.log(data)\\n            })\\n            .catch((error) => {\\n                alert(error)\\n            });\\n    }\\n\\n    render() {\\n        return (\\n            <div>\\n            <input type=\\\"file\\\" accept=\\\".gif,.jpg,.jpeg,.png\\\" onChange={this.imageChosen}/>\\n                <button onClick={this.uploadImage}>upload</button>\\n            </div>\\n\\n        );\\n    }\\n}\\n\\nexport default ImageUpload\",\"import React, { Component } from 'react'\\n\\n\\nclass Images extends Component {\\n\\n\\n    constructor(props) {\\n        super(props);\\n        this.state = { images: [] };\\n    }\\n    componentDidMount() {\\n        fetch('getAllImages', {\\n            method: 'get',\\n        })\\n            .then((response) => {\\n            if (response.status == 200) {\\n                console.log('response=' + response);\\n                return response.json()\\n            }\\n        })\\n            .then((responseData) => {\\n                console.log(responseData)\\n                this.setState({images: responseData});\\n            })\\n\\n    }\\n\\n    deleteImage = (imageName) => {\\n        fetch('/deleteImage/' + imageName, {\\n            method: 'DELETE',\\n        }).then((response) => {\\n            if(!response.ok) throw new Error(response.status);\\n            else return response;\\n        }).then((data) => {\\n            this.componentDidMount();\\n        }).catch((error) => {\\n            console.log('error: ' + error);\\n        });\\n\\n    }\\n\\n     Item = (props) => {\\n        return <li>{props.value}</li>;\\n    }\\n\\n    MyList = (items) => {\\n        return (\\n            <div>\\n                {items.map((item) =>\\n                    <div>\\n                        <img src={\\\"data:image/jpeg;base64,\\\" + item.base64} height={500}/><br/>\\n                        {this.props.auth ? <div><text>Uploader: {item.uploader}</text><br/>\\n                            <text>Filename: {item.name.split('.').slice(0, -1).join('.')}</text>\\n                        <button onClick={()=>this.deleteImage(item.name)}>Delete</button></div> : <br/>}\\n                    </div>)}\\n            </div>\\n        );\\n    }\\n\\n    render() {\\n        if (!this.state.images || !this.state.images.length)\\n            return null;\\n        return (\\n            <div>\\n                {this.MyList(this.state.images)}\\n            </div>\\n\\n        );\\n    }\\n}\\n\\nexport default Images\",\"import React, {Component} from \\\"react\\\";\\nimport {\\n    BrowserRouter as Router,\\n    Route,\\n    Link,\\n    Redirect,\\n    withRouter\\n} from \\\"react-router-dom\\\";\\n\\nimport ImageUpload from './ImageUpload'\\nimport Images from './Images'\\n\\nfunction Auth() {\\n    return (\\n        <Router>\\n            <div>\\n                <AuthButton />\\n                <ul>\\n                    <li>\\n                        <Link to=\\\"/images\\\">Images</Link>\\n                    </li>\\n                    <li>\\n                        <Link to=\\\"/imageUpload\\\">Upload Image</Link>\\n                    </li>\\n                    <li>\\n                        <Link to=\\\"/register\\\">Register</Link>\\n                    </li>\\n                </ul>\\n                <Route path=\\\"/public\\\" component={Public} />\\n                <Route path=\\\"/login\\\" component={Login} />\\n                <PrivateRoute path=\\\"/protected\\\" component={Protected} />\\n                <PrivateRoute path='/images' component={Images}/>\\n                <PrivateRoute path='/imageUpload' component={ImageUpload}/>\\n                <Route path='/register' component={Register}/>\\n            </div>\\n        </Router>\\n    );\\n}\\n\\nconst auth = {\\n    user: \\\"\\\",\\n    admin: false,\\n    isAuthenticated: false,\\n    authenticate(cb) {\\n        this.isAuthenticated = true;\\n        this.getRole(cb);\\n    },\\n    signout(cb) {\\n        this.user = \\\"\\\";\\n        this.admin = false;\\n        this.isAuthenticated = false;\\n        cb();\\n    },\\n    getRole(cb){\\n        fetch('/roles', {\\n            method: 'GET',\\n            headers: {\\n                'Accept': 'application/json',\\n                'Content-Type': 'application/json',\\n            }\\n        }).then((response) => {\\n            if (response.status === 200) {\\n                console.log('response=' + response);\\n                return response.json()\\n            }\\n        })\\n            .then((responseData) => {\\n                this.user = responseData.username;\\n                if(this.role = responseData.authorities[0].name === \\\"ROLE_ADMIN\\\")\\n                    this.admin = true;\\n                cb();\\n            })\\n    }\\n};\\n\\nconst AuthButton = withRouter(\\n    ({ history }) =>\\n        auth.isAuthenticated ? (\\n            <p>\\n                Welcome {auth.user}!\\n                <button\\n                    onClick={() => {\\n                        auth.signout(() => history.push(\\\"/\\\"));\\n                    }}\\n                >\\n                    Sign out\\n                </button>\\n            </p>\\n        ) : (\\n            <p>You are not logged in.</p>\\n        )\\n);\\n\\nfunction PrivateRoute({ component: Component, ...rest }) {\\n    return (\\n        <Route\\n            {...rest}\\n            render={props =>\\n                auth.isAuthenticated ? (\\n                    <Component {...props} auth={auth.admin}/>\\n                ) : (\\n                    <Redirect\\n                        to={{\\n                            pathname: \\\"/login\\\",\\n                            state: { from: props.location }\\n                        }}\\n                    />\\n                )\\n            }\\n        />\\n    );\\n}\\n\\nfunction Public() {\\n    return <h3>Public</h3>;\\n}\\n\\nfunction Protected() {\\n    return <h3>Protected</h3>;\\n}\\n\\nclass Login extends React.Component {\\n\\n    state = {\\n            redirectToReferrer: false,\\n            username: \\\"\\\",\\n            password: \\\"\\\",\\n    };\\n\\n    constructor(props) {\\n        super(props);\\n        this.state = {redirectToReferrer: false,\\n            username: \\\"\\\",\\n            password: \\\"\\\",};\\n\\n        this.handleInputChange = this.handleInputChange.bind(this);\\n        this.login = this.login.bind(this);\\n    }\\n\\n\\n    login = (event) => {\\n        event.preventDefault();\\n        const data = new FormData(event.target);\\n        fetch('/perform_login', {\\n            method: 'POST',\\n            body: data,\\n        })\\n            .then((response) => {\\n                console.log(response)\\n            if(!response.ok && response.status === 401) throw new Error(\\\"Wrong username or password\\\");\\n                else if(!response.ok && response.status === 500) throw new Error(\\\"Server error, please try again later.\\\");\\n            else return response;\\n        })\\n            .then((data) => {\\n                auth.authenticate(() => {\\n                    this.setState({ redirectToReferrer: true });\\n                });\\n            })\\n            .catch((error) => {\\n                alert(error)\\n            });\\n    };\\n\\n    handleInputChange(event) {\\n        const target = event.target;\\n        const value = target.value;\\n        const name = target.name;\\n\\n\\n        this.setState({\\n            [name]: value\\n        });\\n    }\\n\\n    render() {\\n        let { from } = this.props.location.state || { from: { pathname: \\\"/\\\" } };\\n        let { redirectToReferrer } = this.state;\\n\\n        if (redirectToReferrer) return <Redirect to={from} />;\\n\\n        return (\\n            <div>\\n                <form onSubmit={this.login}>\\n                    <label>\\n                        Username:\\n                        <input\\n                            name=\\\"username\\\"\\n                            type=\\\"text\\\"\\n                            value={this.state.username}\\n                            onChange={this.handleInputChange}/>\\n\\n                    </label>\\n                    <br />\\n                    <label>\\n                        Password:\\n                        <input\\n                            name=\\\"password\\\"\\n                            type=\\\"password\\\"\\n                            value={this.state.password}\\n                            onChange={this.handleInputChange}/>\\n                    </label>\\n                    <input type=\\\"submit\\\" value=\\\"Submit\\\" />\\n                </form>\\n            </div>\\n        );\\n    }\\n}\\n\\nclass Register extends Component {\\n\\n    constructor(props) {\\n        super(props);\\n        this.state = {\\n            username: \\\"\\\",\\n            password: \\\"\\\",\\n            role: \\\"ROLE_USER\\\",\\n        };\\n\\n        this.handleInputChange = this.handleInputChange.bind(this);\\n    }\\n\\n    handleInputChange(event) {\\n        const target = event.target;\\n        const value = target.value;\\n        const name = target.name;\\n\\n        this.setState({\\n            [name]: value\\n        });\\n    }\\n\\n    render() {\\n        return (\\n            <form onSubmit={this.handleSubmit}>\\n                <label>\\n                    Username:\\n                    <input\\n                        name=\\\"username\\\"\\n                        type=\\\"text\\\"\\n                        value={this.state.username}\\n                        onChange={this.handleInputChange} />\\n                </label>\\n                <br />\\n                <label>\\n                    Password:\\n                    <input\\n                        name=\\\"password\\\"\\n                        type=\\\"password\\\"\\n                        value={this.state.password}\\n                        onChange={this.handleInputChange} />\\n                </label>\\n                <label>\\n                    Choose privileges:\\n                    <select name=\\\"role\\\"\\n                            value={this.state.role}\\n                            onChange={this.handleInputChange}>\\n                        <option value=\\\"ROLE_USER\\\">USER</option>\\n                        {auth.admin ? <option value=\\\"ROLE_ADMIN\\\">ADMIN</option> : null}\\n                    </select>\\n                </label>\\n                <input type=\\\"submit\\\" value=\\\"Submit\\\" />\\n            </form>\\n        );\\n    }\\n\\n    handleSubmit(event) {\\n        event.preventDefault();\\n        const data = new FormData(event.target);\\n\\n        fetch('/registration', {\\n            method: 'POST',\\n            body: data,\\n        }).\\n        then((response) => {\\n            if(!response.ok)\\n                return response.json();\\n            else\\n                return response;\\n        }).\\n        then((response) => {\\n            if(!response.ok) throw new Error(response.message);\\n            else return response;\\n        })\\n            .then((data) => {\\n                alert(\\\"User created\\\");\\n            })\\n            .catch((error) => {\\n                alert(error);\\n            });\\n    }\\n}\\n\\nexport default Auth;\",\"import React, { Component } from 'react';\\nimport Main from './Main'\\n\\nclass App extends Component {\\n  render() {\\n    return (\\n        <div>\\n            <Main />\\n        </div>\\n    );\\n  }\\n}\\n\\nexport default App;\\n\",\"import React from 'react'\\nimport { render } from 'react-dom'\\nimport { BrowserRouter } from 'react-router-dom'\\nimport App from './App';\\n\\nrender((\\n    <BrowserRouter>\\n        <App />\\n    </BrowserRouter>\\n), document.getElementById('root'));\\n\"]}","code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{20:function(e,t,n){e.exports=n(29)},29:function(e,t,n){\"use strict\";n.r(t);var a=n(0),r=n.n(a),l=n(16),o=n(32),i=n(5),c=n(6),u=n(8),s=n(7),m=n(9),h=n(14),p=n(10),d=n(18),f=n(30),g=n(31),E=n(34),b=n(33),v=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(s.a)(t).call(this,e))).imageChosen=function(e){n.setState({picture:e.target.files[0]})},n.uploadImage=function(){var e=new FormData;e.append(\"file\",n.state.picture),fetch(\"/uploadImage\",{method:\"POST\",body:e}).then(function(e){if(console.log(e),e.ok||401!==e.status){if(e.ok||500!==e.status)return e;throw new Error(\"Server error, please try again later.\")}throw new Error(\"An image with this filename already exists.\")}).then(function(e){console.log(e)}).catch(function(e){alert(e)})},n.state={picture:null},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:\"render\",value:function(){return r.a.createElement(\"div\",null,r.a.createElement(\"input\",{type:\"file\",accept:\".gif,.jpg,.jpeg,.png\",onChange:this.imageChosen}),r.a.createElement(\"button\",{onClick:this.uploadImage},\"upload\"))}}]),t}(a.Component),j=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(s.a)(t).call(this,e))).deleteImage=function(e){fetch(\"/deleteImage/\"+e,{method:\"DELETE\"}).then(function(e){if(e.ok)return e;throw new Error(e.status)}).then(function(e){n.componentDidMount()}).catch(function(e){console.log(\"error: \"+e)})},n.Item=function(e){return r.a.createElement(\"li\",null,e.value)},n.MyList=function(e){return r.a.createElement(\"div\",null,e.map(function(e){return r.a.createElement(\"div\",null,r.a.createElement(\"img\",{src:\"data:image/jpeg;base64,\"+e.base64,height:500}),r.a.createElement(\"br\",null),n.props.auth?r.a.createElement(\"div\",null,r.a.createElement(\"text\",null,\"Uploader: \",e.uploader),r.a.createElement(\"br\",null),r.a.createElement(\"text\",null,\"Filename: \",e.name.split(\".\").slice(0,-1).join(\".\")),r.a.createElement(\"button\",{onClick:function(){return n.deleteImage(e.name)}},\"Delete\")):r.a.createElement(\"br\",null))}))},n.state={images:[]},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:\"componentDidMount\",value:function(){var e=this;fetch(\"getAllImages\",{method:\"get\"}).then(function(e){if(200==e.status)return console.log(\"response=\"+e),e.json()}).then(function(t){console.log(t),e.setState({images:t})})}},{key:\"render\",value:function(){return this.state.images&&this.state.images.length?r.a.createElement(\"div\",null,this.MyList(this.state.images)):null}}]),t}(a.Component);var O={user:\"\",admin:!1,isAuthenticated:!1,authenticate:function(e){this.isAuthenticated=!0,this.getRole(e)},signout:function(e){this.user=\"\",this.admin=!1,this.isAuthenticated=!1,e()},getRole:function(e){var t=this;fetch(\"/roles\",{method:\"GET\",headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\"}}).then(function(e){if(200===e.status)return console.log(\"response=\"+e),e.json()}).then(function(n){t.user=n.username,(t.role=\"ROLE_ADMIN\"===n.authorities[0].name)&&(t.admin=!0),e()})}},w=Object(E.a)(function(e){var t=e.history;return O.isAuthenticated?r.a.createElement(\"p\",null,\"Welcome \",O.user,\"!\",r.a.createElement(\"button\",{onClick:function(){O.signout(function(){return t.push(\"/\")})}},\"Sign out\")):r.a.createElement(\"p\",null,\"You are not logged in.\")});function C(e){var t=e.component,n=Object(d.a)(e,[\"component\"]);return r.a.createElement(g.a,Object.assign({},n,{render:function(e){return O.isAuthenticated?r.a.createElement(t,Object.assign({},e,{auth:O.admin})):r.a.createElement(b.a,{to:{pathname:\"/login\",state:{from:e.location}}})}}))}function y(){return r.a.createElement(\"h3\",null,\"Public\")}function I(){return r.a.createElement(\"h3\",null,\"Protected\")}var k=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(s.a)(t).call(this,e))).state={redirectToReferrer:!1,username:\"\",password:\"\"},n.login=function(e){e.preventDefault();var t=new FormData(e.target);fetch(\"/perform_login\",{method:\"POST\",body:t}).then(function(e){if(console.log(e),e.ok||401!==e.status){if(e.ok||500!==e.status)return e;throw new Error(\"Server error, please try again later.\")}throw new Error(\"Wrong username or password\")}).then(function(e){O.authenticate(function(){n.setState({redirectToReferrer:!0})})}).catch(function(e){alert(e)})},n.state={redirectToReferrer:!1,username:\"\",password:\"\"},n.handleInputChange=n.handleInputChange.bind(Object(p.a)(Object(p.a)(n))),n.login=n.login.bind(Object(p.a)(Object(p.a)(n))),n}return Object(m.a)(t,e),Object(c.a)(t,[{key:\"handleInputChange\",value:function(e){var t=e.target,n=t.value,a=t.name;this.setState(Object(h.a)({},a,n))}},{key:\"render\",value:function(){var e=(this.props.location.state||{from:{pathname:\"/\"}}).from;return this.state.redirectToReferrer?r.a.createElement(b.a,{to:e}):r.a.createElement(\"div\",null,r.a.createElement(\"form\",{onSubmit:this.login},r.a.createElement(\"label\",null,\"Username:\",r.a.createElement(\"input\",{name:\"username\",type:\"text\",value:this.state.username,onChange:this.handleInputChange})),r.a.createElement(\"br\",null),r.a.createElement(\"label\",null,\"Password:\",r.a.createElement(\"input\",{name:\"password\",type:\"password\",value:this.state.password,onChange:this.handleInputChange})),r.a.createElement(\"input\",{type:\"submit\",value:\"Submit\"})))}}]),t}(r.a.Component),S=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(s.a)(t).call(this,e))).state={username:\"\",password:\"\",role:\"ROLE_USER\"},n.handleInputChange=n.handleInputChange.bind(Object(p.a)(Object(p.a)(n))),n}return Object(m.a)(t,e),Object(c.a)(t,[{key:\"handleInputChange\",value:function(e){var t=e.target,n=t.value,a=t.name;this.setState(Object(h.a)({},a,n))}},{key:\"render\",value:function(){return r.a.createElement(\"form\",{onSubmit:this.handleSubmit},r.a.createElement(\"label\",null,\"Username:\",r.a.createElement(\"input\",{name:\"username\",type:\"text\",value:this.state.username,onChange:this.handleInputChange})),r.a.createElement(\"br\",null),r.a.createElement(\"label\",null,\"Password:\",r.a.createElement(\"input\",{name:\"password\",type:\"password\",value:this.state.password,onChange:this.handleInputChange})),r.a.createElement(\"label\",null,\"Choose privileges:\",r.a.createElement(\"select\",{name:\"role\",value:this.state.role,onChange:this.handleInputChange},r.a.createElement(\"option\",{value:\"ROLE_USER\"},\"USER\"),O.admin?r.a.createElement(\"option\",{value:\"ROLE_ADMIN\"},\"ADMIN\"):null)),r.a.createElement(\"input\",{type:\"submit\",value:\"Submit\"}))}},{key:\"handleSubmit\",value:function(e){e.preventDefault();var t=new FormData(e.target);fetch(\"/registration\",{method:\"POST\",body:t}).then(function(e){return e.ok?e:e.json()}).then(function(e){if(e.ok)return e;throw new Error(e.message)}).then(function(e){alert(\"User created\")}).catch(function(e){alert(e)})}}]),t}(a.Component),R=function(){return r.a.createElement(o.a,null,r.a.createElement(\"div\",null,r.a.createElement(w,null),r.a.createElement(\"ul\",null,r.a.createElement(\"li\",null,r.a.createElement(f.a,{to:\"/images\"},\"Images\")),r.a.createElement(\"li\",null,r.a.createElement(f.a,{to:\"/imageUpload\"},\"Upload Image\")),r.a.createElement(\"li\",null,r.a.createElement(f.a,{to:\"/register\"},\"Register\"))),r.a.createElement(g.a,{path:\"/public\",component:y}),r.a.createElement(g.a,{path:\"/login\",component:k}),r.a.createElement(C,{path:\"/protected\",component:I}),r.a.createElement(C,{path:\"/images\",component:j}),r.a.createElement(C,{path:\"/imageUpload\",component:v}),r.a.createElement(g.a,{path:\"/register\",component:S})))},D=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:\"render\",value:function(){return r.a.createElement(\"div\",null,r.a.createElement(R,null))}}]),t}(a.Component);Object(l.render)(r.a.createElement(o.a,null,r.a.createElement(D,null)),document.getElementById(\"root\"))}},[[20,2,1]]]);","extractedComments":[]}